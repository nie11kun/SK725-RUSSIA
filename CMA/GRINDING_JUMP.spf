L4001
STOPRE
M13

R296 = R18 + R295*R4
IF R296 >= 360
    R296 = R296-360
ENDIF

IF R296 < 0
    R296 = R296+360
ENDIF

R294 = R17 + R295
IF R294 < 0
    R294 = R294 + 360
ENDIF
IF R294 >= 360
    R294 = R294 - 360
ENDIF

IF R0==-1 GOTOF LEFT
;������
RIGHT:
G90 G00 C=R294
        B=R296  ;��ʱBC��������
        Z=R15 - R295/360*R1
G90 G00 X=R190+R13   ;X���ߵ�(�Ե�ֵ+ĥ���˵�����)
MSG("processing "<<R100<<"times, The feed depth is "<<R103<<"mm") ;��ǰΪ�ڼ������������
G90 G01 X=R190 F1400 ;X���ߵ��Ե�ֵ
;;;;;;;;;G91 X=-R103 F=800   ;X�������� 
R195=0
N100 R195=R195+1
N101 G90 G01 Z=R15 - R295/360*R1 -2*R1*(R195-1) F500 
IF R2==0 ;;;;;;ֱ��
G90 G00 C=R294
ELSE
   IF R3==1;;;;;;�жϲ۵���������
   G90 G00 C=R17+2*(R195-1)*R69
   ELSE
   G90 G00 C=R17-2*(R195-1)*R69
   ENDIF
ENDIF
B=R296
G01 G90 X=R190-R103 F=800
TRAILON(B,C,KEY)
G64 G91 G01 X=X_JUMPDIS Z=-KEY_JUMP*R1 C=C_JUMP F=R101*360 
G91 G01 X=R13 F800
STOPRE
TRAILOF(B,C)
IF R195<Z_TIAO GOTOB N100
R190=R190-R103  ;ĥ���Ե�ֵ��
G91 G00 X=R13      ;�˵�
G90 G00 Z=R15 - R295/360*R1      ;Z���ĥ�����
G90 G01 C=R294 F=60*360    ;C���ĥ�����
        B=R296    ;B���ĥ�����
IF R105==0 GOTOF END  ;����ڼ���������������������
DRESSING   ;����
GOTOF END

;������
LEFT:
G90 G00 C=R294
        B=R296  ;��ʱBC��������
        Z=R16 + R295/360*R1
G90 G00 X=R190+R13   ;X���ߵ�(�Ե�ֵ+ĥ���˵�����)
MSG("processing "<<R100<<"times, The feed depth is "<<R103<<"mm") ;��ǰΪ�ڼ������������
G90 G01 X=R190 F1400   ;X���ߵ��Ե�ֵ
;;;;;;;;;;;;;G91 X=-R103 F=800     ;X�������� 
R195=0
N1100 R195=R195+1
N1101 G90 G01 Z=R16 + R295/360*R1 -2*R1*(R195-1) F500 
IF R2==0 ;;;;;;ֱ��
G90 G00 C=R294
ELSE
   IF R3==1;;;;;;�жϲ۵���������
   G90 G00 C=R17+2*(R195-1)*R69
   ELSE
   G90 G00 C=R17-2*(R195-1)*R69
   ENDIF
ENDIF
B=R296
G01 G90 X=R190-R103 F=800
TRAILON(B,C,KEY)
G64 G91 G01 X=X_JUMPDIS Z=KEY_JUMP*R1 C=C_JUMP F=R101*360 
G91 G01 X=R13 F800
STOPRE
TRAILOF(B,C)
IF R195<Z_TIAO GOTOB N100
R190=R190-R103  ;ĥ���Ե�ֵ��
G91 G00 X=R13      ;�˵�
G90 G00 Z=R16 + R295/360*R1      ;Z���ĥ�����
G90 G01 C=R294 F=60*360   ;C���ĥ�����
        B=R296    ;B���ĥ�����
IF R105==0 GOTOF END  ;����ڼ���������������������
DRESSING   ;����
END: 
M17



